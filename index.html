<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>عيادة الزيتون البيطرية</title>
    
    <!-- سياسات الأمان -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' https://cdnjs.cloudflare.com https://fonts.googleapis.com 'unsafe-inline';
        style-src 'self' https://cdnjs.cloudflare.com https://fonts.googleapis.com 'unsafe-inline';
        font-src 'self' https://cdnjs.cloudflare.com https://fonts.gstatic.com;
        img-src 'self' data: https:;
        connect-src 'self';
        frame-src 'none';
        object-src 'none';
        base-uri 'self';
        form-action 'self';
    ">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    
    <!-- روابط الموارد الخارجية مع SRI -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
          integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
          crossorigin="anonymous" referrerpolicy="no-referrer">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" 
          rel="stylesheet"
          integrity="sha384-EXAMPLE-HASH-FOR-FONT"
          crossorigin="anonymous">
    
    <!-- ملف الأنماط المحلي -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- زر المتجر -->
    <a href="Main.html" class="store-btn" id="dynamicBtn" aria-label="انتقل إلى المتجر">
        <i class="fas fa-store"></i>
    </a>
    
    <div class="app-container">
        <!-- شريط التنقل العلوي -->
        <nav class="top-nav" aria-label="القائمة الرئيسية">
            <div class="nav-brand">
                <i class="fas fa-paw logo-icon" aria-hidden="true"></i>
                <span>عيادة الزيتون البيطرية</span>
            </div>
            <div class="nav-actions">
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="ابحث عن المنتجات..." aria-label="بحث عن المنتجات">
                    <button id="search-btn" aria-label="بحث">
                        <i class="fas fa-search" aria-hidden="true"></i>
                    </button>
                </div>
                <div class="cart-icon" role="button" tabindex="0" aria-label="سلة التسوق">
                    <i class="fas fa-shopping-basket" aria-hidden="true"></i>
                    <span class="cart-count">0</span>
                </div>
            </div>
        </nav>

        <!-- المحتوى الرئيسي -->
        <main class="main-content">
            <!-- شريط التصنيفات -->
            <div class="categories-bar" role="tablist" aria-label="تصنيفات المنتجات">
                <div class="category-filter active" data-category="all" role="tab" aria-selected="true">الكل</div>
                <div class="category-filter" data-category="treatments" role="tab" tabindex="0">
                    <i class="fas fa-syringe" aria-hidden="true"></i>
                    <span>علاجات</span>
                </div>
                <!-- باقي التصنيفات بنفس النمط -->
            </div>

            <!-- بطاقات المنتجات -->
            <div class="products-grid" id="menu-container" role="region" aria-live="polite">
                <!-- سيتم تعبئتها عبر JavaScript -->
            </div>
        </main>

        <!-- سلة التسوق العائمة -->
        <div class="floating-cart" role="dialog" aria-modal="true" aria-labelledby="cart-title" hidden>
            <div class="cart-header">
                <h3 id="cart-title">سلة التسوق</h3>
                <button class="close-cart" aria-label="إغلاق السلة">
                    <i class="fas fa-times" aria-hidden="true"></i>
                </button>
            </div>
            <div class="cart-items" id="cart-items" role="region" aria-live="polite">
                <!-- سيتم تعبئتها عبر JavaScript -->
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <span>المجموع:</span>
                    <span class="total-price">0 د.ع</span>
                </div>
                <button class="checkout-btn">إتمام الطلب</button>
            </div>
        </div>
    </div>

    <!-- شريط التنقل السفلي -->
    <nav class="elegant-bottom-nav" aria-label="القائمة السفلية">
        <!-- محتوى القائمة السفلية -->
    </nav>

    <!-- ملفات JavaScript مع SRI -->
    <script src="data.js"></script>
    <script src="script.js"></script>
    
    <!-- النص البرمجي المضمن مع التحسينات -->
    <script>
        // كود JavaScript المحسن
        document.addEventListener('DOMContentLoaded', function() {
            // التحقق من وجود عناصر DOM قبل استخدامها
            const elements = {
                storeBtn: document.getElementById('dynamicBtn'),
                // إضافة جميع العناصر الأخرى التي يحتاجها الكود
            };
            
            if (!elements.storeBtn) return;
            
            // وظيفة التحكم في ظهور زر المتجر
            function handleScroll() {
                // تنفيذ الوظيفة فقط إذا كان العنصر موجوداً
                // ...
            }
            
            // إضافة مستمعات الأحداث
            window.addEventListener('scroll', handleScroll);
            window.addEventListener('resize', handleScroll);
            
            // تحديث الزر حسب الصفحة الحالية
            function updateButtonForPage() {
                // ...
            }
            
            updateButtonForPage();
            window.addEventListener('popstate', updateButtonForPage);
        });
    </script>
</body>
</html>